<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Conectar Restaurant Website">
    <meta property="og:image" content="https://telegra.ph/file/1c46132d4fff0accafde6.jpg">
    <meta property="og:site_name" content="Conectar Restaurant Website">
    <meta property="og:title" content="Conectar Restaurant Website">
    <meta property="og:description" content="Conectar Restaurant Website">
    <title>Conectar Restaurant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#order">Order</a></li>
                <li><a href="#about">About Us</a></li>
                <li><a href="#contacts">Contacts</a></li>
                <li><a href="mailto:Conectarrestaurants@gmail.comfrom ConectarRestaurantWebsite&body=Hello Conectar Restaurant,">Email</a></li>
                <li><a href="https://wa.me/233249510633/?text=Hello+Conectar+Restaurant">Whatsapp</a></li>
                <li><a href="https://wa.me/233257789272/?text=Hello+Kwabena+Osei+Nketiah,+I+like+your+website">Developer</a></li>
                <li><a href="https://raw.githubusercontent.com/Hak3rz-secret/fetchdata/main/1">HELP</a></li>
            </ul>
        </nav>
        <div class="logo">
            <img src="images/conectar.jpg" alt="Conectar Restaurant Logo" class="logo-image">
            <h1>Conectar Restaurant</h1>
            <h3>Come for a drink, stay for a meal</h3>
        </div>
    </header>

    <section id="order" class="section">
        <h2>Order Your Food</h2>
        <div class="menu-item">
            <img src="images/friedrice.jpg" alt="Fried Rice" class="menu-image">
            <p>Fried Rice - Delicious Chicken Fried Rice - 50 cedis</p>
            <button type="button" onclick="addToCart('Fried Rice', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/jollof.jpg" alt="Jollof" class="menu-image">
            <p>Jollof - Scrumptious Ghana Jollof - 50 cedis</p>
            <button type="button" onclick="addToCart('Jollof', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/ampesie.jpg" alt="Ampesie" class="menu-image">
            <p>Ampesie - Traditional Plantain and Kontomire - 50 cedis</p>
            <button type="button" onclick="addToCart('Ampesie', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/razs.jpg" alt="Rice and Zongo Stew" class="menu-image">
            <p>Rice and Zongo Stew - Local rice with tasty stew - 50 cedis</p>
            <button type="button" onclick="addToCart('Rice and Zongo Stew', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/noodles.jpg" alt="Spicy Noodles" class="menu-image">
            <p>Spicy Noodles - Hot flavoured noodles to spice up your day - 50 cedis</p>
            <button type="button" onclick="addToCart('Noodles', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/aj.jpg" alt="Assorted Jollof Rice" class="menu-image">
            <p>Assorted Jollof Rice - Scrumptious Ghana Jollof - 50 cedis</p>
            <button type="button" onclick="addToCart('Assorted Jollof', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/af.jpg" alt="Assorted Fried Rice" class="menu-image">
            <p>Assorted Fried Rice - Exquisite Fried Rice - 50 cedis</p>
            <button type="button" onclick="addToCart('Assorted Fried Rice', 50)">Add to List</button>
        </div>
        <div class="menu-item">
            <img src="images/waakye.jpg" alt="Waakye" class="menu-image">
            <p>Waakye - Popular Delicacy - 50 cedis</p>
            <button type="button" onclick="addToCart('Waakye', 50)">Add to List</button>
        </div>
    </section>

    <section id="contacts" class="section"> 
        <h2>Contacts</h2> 
        <div class="contact-info"> 
            <p>Contact us on:<br>
            Phone and WhatsApp: 0249510633<br>
            Email: Conectarrestaurants@gmail.com<br>
            Developer: 0257789272</p> 
        </div> 
    </section>
    
    <section id="about" class="section"> 
        <h2>About Us</h2>
        <div class="about-us"> 
            <p>Conectar Restaurant<br>
            We are located at Kwadaso, Kumasi.<br>
            Website by: Kwabena Osei Nketiah 0257789272</p> 
        </div> 
    </section>

    <!-- Cart Sidebar -->
    <div id="cart" class="cart-sidebar">
        <h2>Cart(20 cedis delivery fee)</h2>
        <div id="cart-items"></div>
        <p id="cart-total">Total: 0 Cedis</p>
        <button onclick="showOrderFormModal()">Checkout</button>
        <!-- Close Button in HTML -->
<button class="close-btn" onclick="closeCart()">Ã—</button>
</div>

    <!-- Order Form Modal -->
    <div id="order-form-modal" style="display:none;">
        <h2>Order Form</h2>
        <div id="order-details"></div>
        <form action="https://formspree.io/f/xpwadnan" method="post" enctype="multipart/form-data" id="order-form-modal" onsubmit="handleFormSubmit(event)">
            <input type="text" name="name" placeholder="Your Name" required>
            <input type="tel" name="number" placeholder="Your Phone Number" required>
            <input type="text" name="location" placeholder="Your Location" id="location-input" required>
            <input type="hidden" name="latitude" id="latitude">
            <input type="hidden" name="longitude" id="longitude">
            <button type="button" onclick="getCurrentLocation()">Use Your Current Location</button>
            <button type="submit">Place your Order</button>
        </form>
    </div>

    <!-- Popup Modal -->
    <div id="popup" class="popup-modal" style="display:none;">
        <div class="popup-content">
            <span class="close-btn" onclick="document.getElementById('popup').style.display='none'">&times;</span>
            <p id="popup-message"></p>
        </div>
    </div>

    <script>
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    document.getElementById('latitude').value = position.coords.latitude;
                    document.getElementById('longitude').value = position.coords.longitude;
                    document.getElementById('location-input').value = "Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude;
                }, function() {
                    alert("Unable to retrieve your location.");
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function addToCart(dishName, price) {
            let cartList = document.getElementById('cart-items');
            let itemExists = false;
            
            document.querySelector('.cart-sidebar').classList.add('show');

            for (let item of cartList.children) {
                if (item.dataset.dish === dishName) {
                    let quantityInput = item.querySelector('input');
                    quantityInput.value = parseInt(quantityInput.value,10) + 1;
                    itemExists = true;
                    break;
                }
            }

            if (!itemExists) {
                let cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.dataset.dish = dishName;
                cartItem.dataset.price = price;
                cartItem.innerHTML = `
                    <p>${dishName} - ${price} Cedis</p>
                    <input type="number" value="1" min="1" onchange="updateCartTotal()">
                    <button onclick="removeFromCart(this)">Remove</button>
                `;
                cartList.appendChild(cartItem);
            }

            updateCartTotal();
        }

        function updateCartTotal() {
            let cartList = document.getElementById('cart-items');
            let total = 0;
            
            for (let item of cartList.children) {
                let quantity = parseInt(item.querySelector('input').value,10);
                let price = parseInt(item.dataset.price,10);

                console.log('Item:',item.dataset.dish,'Quantity:',quantity, 'Price:',price);
                
                if (isNaN(quantity) || quantity <= 0) {
                    quantity = 1;
                    }
                
                if (isNaN(price)) {
                    price = 0;
                    }
                total += price * quantity;
            }
            
            total += 20; // Delivery fee
            document.getElementById('cart-total').innerText = 'Total: ' + total + ' Cedis';
        }

        function removeFromCart(button) {
            let item = button.parentElement;
            item.remove();
            updateCartTotal();
        }

    function closeCart() {
        document.querySelector('.cart-sidebar').classList.remove('show');
    }

        function showOrderFormModal() {
            let cartList = document.getElementById('cart-items');
            if (cartList.children.length === 0) {
                showPopup('Your cart is empty.');
                return;
            }
            populateOrderFormModal();
            document.getElementById('order-form-modal').style.display = 'block';
            alert("Stage 1 set")
        }

            
            // Populate the order form with the cart items 
            function populateOrderFormModal(){
                let cartList = document.getElementById('cart-items');
            let orderDetails = document.getElementById('order-details');
            orderDetails.innerHTML = ''; // Clear existing order details
                document.getElementById('order-form-modal').style.display = 'block';
                alert("Stage 2 set")

            for (let item of cartList.children) {
                let dishName = item.dataset.dish;
                let quantity = item.querySelector('input').value;
                let dishElement = document.createElement('p');
                dishElement.textContent = `${dishName}: ${quantity}`;
                orderDetails.appendChild(dishElement);
                alert(Final stage set)
            }
        }

        function showPopup(message) {
            let popup = document.getElementById('popup');
            document.getElementById('popup-message').innerText = message;
            popup.style.display = 'block';
        }

        function handleFormSubmit(event) {
            event.preventDefault(); // Prevent form submission

            // Gather form data
            let formData = new FormData(event.target);

            // Example of handling form data (you can customize this)
            console.log('Form data:');
            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }

            // After form handling, you can submit the form
            event.target.submit();
        }
    </script>
</body>
</html>
